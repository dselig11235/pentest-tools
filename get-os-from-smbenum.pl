#!/usr/bin/perl -w

my %oses = ();
my $maxlen = 0;
foreach (<>) {
    if(/Host is running (.*build:\d+\))/) {
        if(not exists $oses{$1}) {
            $oses{$1} = 0;
            my $l = length($1);
            $maxlen = $l > $maxlen ? $l : $maxlen;
        }
        $oses{$1} += 1;
    }
}

my $width = $maxlen+5;
foreach my $os (sort {$oses{$b} <=> $oses{$a}} keys %oses) {
    printf("%-${width}s %d\n", $os, $oses{$os});
}
